---
name: Fetch

# yamllint disable-line rule:truthy
on:
  pull_request:
  push:

jobs:
  Fetch:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        day: [2]
        month: [2]
        year: [2020]
        pair: [EURUSD]
    steps:
      - uses: actions/checkout@v2
      - uses: fx31337/fx-data-download-action@master
        with:
          Days: ${{ matrix.day }}
          Months: ${{ matrix.month }}
          Years: ${{ matrix.year }}
          Pairs: ${{ matrix.pair }}
      - name: Combine files
        run: find . -name '*.csv' -print0 | sort -z | xargs -r0 cat | tee all.csv > /dev/null
      - uses: fx31337/fx-data-convert-action@master
        with:
          InputFile: all.csv
          OutputFormat: hst
      - uses: fx31337/fx-data-convert-action@master
        with:
          InputFile: all.csv
          OutputFormat: fxt
